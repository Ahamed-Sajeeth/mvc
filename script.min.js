"use strict";function _defineProperty(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}var Model=function(){function t(){_classCallCheck(this,t),this.todos=JSON.parse(localStorage.getItem("todos"))||[]}return _createClass(t,[{key:"bindHandler",value:function(t){this.onTodoListChanged=t.onTodoListChanged}},{key:"addTodo",value:function(t){this.todos=[].concat(_toConsumableArray(this.todos),[t]),this.update(),this.onTodoListChanged(this.todos)}},{key:"editTodo",value:function(t,e){this.todos=this.todos.map(function(o){return o.id===t?{id:o.id,text:e,complete:o.complete}:o}),this.update(),this.onTodoListChanged(this.todos)}},{key:"deleteTodo",value:function(t){this.todos=this.todos.filter(function(e){return e.id!==t}),this.update(),this.onTodoListChanged(this.todos)}},{key:"toggleTodo",value:function(t){this.todos=this.todos.map(function(e){return e.id===t?{id:e.id,text:e.text,complete:!e.complete}:e}),this.update(),this.onTodoListChanged(this.todos)}},{key:"update",value:function(){localStorage.setItem("todos",JSON.stringify(this.todos))}}]),t}(),View=function(){function t(){_classCallCheck(this,t),this.app=this.getElement("#root"),this.form=this.createElement("form"),this.input=this.createElement("input"),this.input.type="text",this.input.placeholder="Add todo",this.input.name="todo",this.submitButton=this.createElement("button"),this.submitButton.textContent="Submit",this.form.append(this.input,this.submitButton),this.title=this.createElement("h1"),this.title.textContent="Todos",this.todoList=this.createElement("ul","todo-list"),this.app.append(this.title,this.form,this.todoList)}return _createClass(t,[{key:"resetInput",value:function(){this.input.value=""}},{key:"createElement",value:function(t,e){var o=document.createElement(t);return e&&o.classList.add(e),o}},{key:"getElement",value:function(t){return document.querySelector(t)}},{key:"displayTodos",value:function(t){for(var e=this;this.todoList.firstChild;)this.todoList.removeChild(this.todoList.firstChild);if(0===t.length){var o=this.createElement("p");o.textContent="Nothing to do! Add a task?",this.todoList.append(o)}else t.forEach(function(t){var o=e.createElement("li");o.id=t.id;var n=e.createElement("input");n.type="checkbox",n.checked=t.complete;var i=e.createElement("span");if(i.contentEditable=!0,i.classList.add("editable"),t.complete){var s=e.createElement("s");s.textContent=t.text,i.append(s)}else i.textContent=t.text;var a=e.createElement("button","delete");a.textContent="Delete",o.append(n,i,a),e.todoList.append(o)});console.log(t)}},{key:"setUpEventListeners",value:function(t){this.form.addEventListener("submit",t.handleAddTodo),this.todoList.addEventListener("click",t.handleDeleteTodo),this.todoList.addEventListener("input",t.handleEditTodo),this.todoList.addEventListener("focusout",t.handleEditTodoComplete),this.todoList.addEventListener("change",t.handleToggle)}},{key:"todoText",get:function(){return this.input.value}}]),t}(),Controller=function t(){var e=this;_classCallCheck(this,t),_defineProperty(this,"onTodoListChanged",function(t){e.view.displayTodos(t)}),_defineProperty(this,"handleAddTodo",function(t){if(t.preventDefault(),e.view.todoText){var o={id:e.model.todos.length+1,text:e.view.todoText,complete:!1};e.model.addTodo(o),e.view.resetInput()}}),_defineProperty(this,"handleEditTodo",function(t){"editable"===t.target.className&&(e.temporaryEditValue=t.target.innerText)}),_defineProperty(this,"handleEditTodoComplete",function(t){if(e.temporaryEditValue){var o=parseInt(t.target.parentElement.id);e.model.editTodo(o,e.temporaryEditValue),e.temporaryEditValue=""}}),_defineProperty(this,"handleDeleteTodo",function(t){if("delete"===t.target.className){var o=parseInt(t.target.parentElement.id);e.model.deleteTodo(o)}}),_defineProperty(this,"handleToggle",function(t){if("checkbox"===t.target.type){var o=parseInt(t.target.parentElement.id);e.model.toggleTodo(o)}}),this.model=new Model,this.view=new View,this.model.bindHandler(this),this.view.setUpEventListeners(this),this.temporaryEditValue,this.onTodoListChanged(this.model.todos)},app=new Controller;